var txNodes = [{"id":"3d24452b9817ba67d8490aa12e7b2315e6e6f471ad6089621a124f3b347f4d6f","value":0.00083101,"scaledValue":12.732171823717216,"index":0,"x":-13.471033247548686,"y":-6.34966764319374,"vy":0.000006483421148009705,"vx":0.0022456314836190815},{"id":"b19d7dace266aae4abefc05481252d941ce621e0f961181a6877c970169cb456","value":0.23979982,"scaledValue":1.4301230324636842,"index":1,"x":-90.0770366685337,"y":157.37175682264416,"vy":-0.0042397433077745236,"vx":0.0009615697470182649},{"id":"b10f47b059ac88f263c184b1f5f68ffb711a34f6f4a93b32dca38cfb47759fa9","value":0.09232448,"scaledValue":0.9561148763416316,"index":2,"x":-1.8624144915664762,"y":-182.25129685116664,"vy":0.009260779702027789,"vx":0.006003329790461164},{"id":"060fb6c5824b858e39d869a74acad3d0ca8b0f58b630b1458d0d07a0337f94c8","value":0.01561187,"scaledValue":5.399309391566105,"index":3,"x":116.54743918411762,"y":135.29356925455008,"vy":-0.0008510824692839813,"vx":-0.002825562440276541},{"id":"9f3e675a936634deb0d22215cf23ecc7e1f4cff8432fd38f93bc5e226cc5b088","value":1.49634654,"scaledValue":6.007566242779736,"index":4,"x":-45.408267145549736,"y":-16.90411274377115,"vy":-0.001738939747105586,"vx":0.003424282274696999},{"id":"a20576aa2cede4e7eea08fb932cab97b6991b194bf110905b0ddca79d792d176","value":0.010341,"scaledValue":6.429096756948248,"index":5,"x":167.10357874433288,"y":-73.33794818494961,"vy":0.012183818984093086,"vx":0.000441058940197947},{"id":"99430ba5f12e97522ec3df715a7396d2424ec03dbb4fb3b6dcd0217931eaba29","value":0.01366307,"scaledValue":5.7326467657828495,"index":6,"x":7.12647426301606,"y":25.21350717767776,"vy":0.0057178923952212685,"vx":0.006628337640678027},{"id":"e6e0041a224b851a9857b171d7bf4a4a63736bf26f4db261838054a8b4daca4c","value":0.06664751,"scaledValue":1.7708439809878298,"index":7,"x":-46.01658632312138,"y":-58.8508180312872,"vy":0.003456450900232111,"vx":0.0005597240906739187},{"id":"2aabd5dfbf72d5879c3e824bf36037bb10ea369b884a5cd3c7733ce21265c75a","value":0.08666886,"scaledValue":1.1141515731566143,"index":8,"x":173.4162925112313,"y":54.52855573351035,"vy":0.001915909928248005,"vx":-0.002901644937672154},{"id":"89472da7823158f53be498eaa584471f3204d17e837681180837c9c46fa5b719","value":0.16289235,"scaledValue":0.4633356854929449,"index":9,"x":-169.13828030860637,"y":74.39677915602388,"vy":-0.011463384314846637,"vx":-0.010429681851030414},{"id":"04c6e8e4805b460cbf5d3b0090ba46a3a9a75d1468dd342adbe8208e1ab51ee0","value":13.56643956,"scaledValue":11.518997658977959,"index":10,"x":106.11808782661308,"y":-150.48436161082975,"vy":0.0001923295611363729,"vx":0.018123412538344773},{"id":"1b66c7369262c1a5f21f6247a95ad1fdd318ccf0865b2fe6ceb562320f699971","value":0.0062173,"scaledValue":7.701048875184737,"index":11,"x":50.499419452323075,"y":175.06938220218302,"vy":0.0031750282673201013,"vx":-0.0033124071011294554},{"id":"25b0e267dff039af517633e417e1648068b223e1124c4e8fa21d4ad196bee4e3","value":0.06863764,"scaledValue":1.697285516694742,"index":12,"x":-156.7083770236459,"y":-97.4955486811068,"vy":0.005755551541994408,"vx":-0.016475511355080963},{"id":"60f901605876b17cba4090ca0d72c873577685d44f5042c96706beaba7247e9c","value":0.06687313,"scaledValue":1.7623950919343754,"index":13,"x":14.021849080673048,"y":-11.169763631836359,"vy":0.01852009154120226,"vx":0.002366599126110394},{"id":"01fe8a65f33e8279802732340c7a86e670009b87bb7799268ce67200ec21c19a","value":0.00125365,"scaledValue":11.704239956467578,"index":14,"x":-39.09472892981099,"y":12.424550236399915,"vy":0.0001167413279695717,"vx":0.005698930691125958},{"id":"2853d82f7d5afb2be4f2ba856730890f9b71a701117e1b7e5790d89d3fcd5d79","value":32.25659924,"scaledValue":13.684306624763273,"index":15,"x":-22.099823399836787,"y":-37.291960367691296,"vy":-0.0022453934885308777,"vx":0.008558837180940748},{"id":"2c26999469521371524676aab4126bf9fd49d390286bc5fd4bd872287425ffc4","value":0.07034209,"scaledValue":1.6359623488857222,"index":16,"x":35.21757261358048,"y":18.941382170730357,"vy":0.013525049063677371,"vx":0.015203850304919901},{"id":"ef254810360b102c8375fcc1f7cb5978b32819a00c6dc1ca6e0174402ac77785","value":0.01231028,"scaledValue":5.993301483273202,"index":17,"x":-183.19086829749716,"y":-11.164971782430488,"vy":0.01420209196938496,"vx":0.008405960719959093},{"id":"3a7bd547a71e018e3f08df215c857614ef2501cf67b48f6cca1235e6949f28a5","value":0.13539144,"scaledValue":0.0010371485223430454,"index":18,"x":140.1951599415268,"y":-117.13806564154531,"vy":0.020131755125253382,"vx":0.008273049674092746},{"id":"7663aa917dc61a01b2e4cd7a1af90f4b56b73bf158b489c12153b31c48611c89","value":0.86179562,"scaledValue":4.628157159502452,"index":19,"x":-12.45121709535639,"y":181.22742165405157,"vy":-0.004494762151134068,"vx":-0.007350282368960719},{"id":"01ade44079339e23467074df570d1ab23458c171a8d07eabce957e94a67ccd8c","value":0.12003309,"scaledValue":0.29996956053033674,"index":20,"x":-117.68884177638009,"y":-141.00646666032662,"vy":-0.006191344319626401,"vx":-0.00994192653831165},{"id":"9860b13cfd5cf59996ddf8797e0d4a9947f6fa92d616b702f8ea4b49aa803f71","value":0.17277567,"scaledValue":0.6105969221591305,"index":21,"x":181.40786309181942,"y":12.6248565245138,"vy":0.007976820553068644,"vx":0.0019686461884548478},{"id":"76c113a3a7e3e81ea6b9cc1152ddbc0af3945b0573d140a3112a05de89c052ca","value":0.02119487,"scaledValue":4.634990269296008,"index":22,"x":-140.79831239649687,"y":114.49120115469579,"vy":0.014343757284665614,"vx":0.016703367703147776},{"id":"90991e0431d6c48426df6d875e0ca93f971a0d5c441a641b7ebf27431e9bc3d8","value":0.14097693,"scaledValue":0.10210245247007421,"index":23,"x":67.36378889836388,"y":-170.53120529962283,"vy":0.0003794871106544306,"vx":0.012956823889483016},{"id":"b8a5f2328bbf7815a54351c39d8088a34b35f2b02bd0b02009d54e5d2220f107","value":1.52873993,"scaledValue":6.061109552291504,"index":24,"x":92.23542100674734,"y":156.65590934179818,"vy":0.002842335306862642,"vx":-0.0010132978202937349},{"id":"78712bbcf713552cccfad5015564ec3e61107aeb87b1d006270e27154f50e857","value":0.0064207,"scaledValue":7.620570332390395,"index":25,"x":-174.03256390564584,"y":-54.980385373934475,"vy":0.005352342323802994,"vx":-0.006047598236485929},{"id":"12f370558a9fffae57fbf69089e0031cbb59b0bef10cd0ebad1c9a08cfba9814","value":0.00125112,"scaledValue":11.709290322090784,"index":26,"x":180.01146834497013,"y":-30.837084366366184,"vy":0.015663580477936163,"vx":0.004604825852709338},{"id":"8963f4fecd7190d395a7537a71a1a34be1519c91bb148cc5fc948e824953c043","value":0.0611022,"scaledValue":1.988018517265406,"index":27,"x":-60.30840124429351,"y":169.68021690969468,"vy":0.005634400688173047,"vx":0.005734083886017726},{"id":"6606abf026c93f0d4a1086ddd6aed857cd7524efc7d4226af143b000c083d6b3","value":0.08471591,"scaledValue":1.1711296388261294,"index":28,"x":-53.809221313112005,"y":-175.1357106757755,"vy":-0.005740181582887227,"vx":0.0001680834750003135},{"id":"53db287fd9e79e6ce837fcf0496f7e381b3767756f375ee6acd4efc40bcd05ae","value":0.0161202,"scaledValue":5.319205337581822,"index":29,"x":158.75902008446332,"y":90.42805072900477,"vy":-0.003924824456044096,"vx":0.012890305833045868},{"id":"42bf700303f861e9725186d1fb0aca2a4cd8aa3cedb25aaaa263d2600c4599c3","value":0.12575655,"scaledValue":0.18351845970911196,"index":30,"x":-175.94102471771822,"y":40.69931710968775,"vy":-0.006271233466006942,"vx":0.007758152760678904},{"id":"5a62f6276179e4a302209b5613ae924ea86d852d41138aa8ddbc2f0ae8bc9673","value":0.00561742,"scaledValue":7.95470698804175,"index":31,"x":16.12898198170128,"y":-44.024031577636435,"vy":0.011588663719416137,"vx":0.007399638233178651},{"id":"39d86e65e4b83e09fe7db7b237b445e121fe4aeaa979a0e1960ba5b9d6b838fd","value":0.00698938,"scaledValue":7.408408562026327,"index":32,"x":19.670874975621935,"y":176.9509088062369,"vy":0.00578119942329911,"vx":-0.004232964365993291},{"id":"26e84459f885a02539678c41283600a678b4b54d146dece415857cb8c4d72edd","value":0.77621715,"scaledValue":4.366692586323761,"index":33,"x":-130.92584128035458,"y":-110.62439906946152,"vy":-0.002914481758265319,"vx":-0.011978499061638547},{"id":"490cce78f8a3e9b8465cefb3c125ca824d6668fed8049562e0fba3d2df2c670f","value":0.20454769,"scaledValue":1.0326146806178182,"index":34,"x":56.552284185348356,"y":2.398386276300613,"vy":0.005046743816099851,"vx":-0.001346591745426917},{"id":"ee0249452c34f6209d84b2b772720c7d3ef6406536aab9c8a80211b61f5eddf4","value":0.01183903,"scaledValue":6.090883946395111,"index":35,"x":-117.112127580925,"y":135.99736104563164,"vy":0.003199227645708924,"vx":0.01499979542964509},{"id":"58f1fed2cb004d3199e67768246c96191aa61947b5d830d77f6474ff60fa0509","value":0.18387021,"scaledValue":0.7661871232355875,"index":36,"x":27.026288965127762,"y":-179.26800060222325,"vy":-0.0042024497894881385,"vx":0.005308408496621464},{"id":"ed9a38004eba3ca2dd8a7f5460750ca6267e4834a6f3f8705024f90b4c33a1f7","value":0.0047862,"scaledValue":8.355046254547837,"index":37,"x":136.0935009330883,"y":111.15735947486536,"vy":0.01315874549678584,"vx":0.00035819719193685984},{"id":"1e683442cbe572be97dfa2d5005067b97f224346138095200f76ac3bb01029c3","value":10.85501269,"scaledValue":10.961567430940235,"index":38,"x":-75.49986975445532,"y":-9.086074983539518,"vy":0.002008631095996602,"vx":0.0018352585613715111},{"id":"2c9429cc3350137b64e180f3aee8dfadf97b44afb57a8a18cb9a1315536258b5","value":39.8011471,"scaledValue":14.209739333707743,"index":39,"x":39.60379857683235,"y":-23.55382069196047,"vy":0.007128336284558717,"vx":0.001961652896754967},{"id":"45e599f7fb1c51af44da43ee60e376541e1460edfb53932ecb1475428bf12a55","value":0.00997578,"scaledValue":6.518987809436489,"index":40,"x":-27.671532276931334,"y":38.60071414072411,"vy":-0.006773432988038813,"vx":-0.0007317692907272966},{"id":"1345ff3a0edb7a8e1d1f7b981d616f70e493d91df2333271186bb7fe5563df6e","value":0.00440104,"scaledValue":8.564786005877602,"index":41,"x":-86.52325298832824,"y":-158.09721350453736,"vy":-0.00887101735217879,"vx":0.00004508552540345434},{"id":"f6894d8308652d098e31e39930908f8e027bbb12d129b8e2f2843db4441b70d0","value":0.30549839,"scaledValue":2.0354730739163163,"index":42,"x":156.16696167715483,"y":32.7510922006904,"vy":0.0027885683352445122,"vx":-0.0021850946120232084},{"id":"f3d0debb16efa2098dfdb842d28087074056d00c246dd9ebc856d42877135e02","value":0.05839935,"scaledValue":2.1011262983672063,"index":43,"x":-62.96416934164287,"y":40.7485285062539,"vy":-0.0031161463502149766,"vx":-0.015318826993081546},{"id":"177a7e2715a847c88af7110dc34ae94608886ccd929b372beaf836d9c314d9d0","value":0.0086401,"scaledValue":6.878352805397693,"index":44,"x":80.02103161610371,"y":-139.90142887967366,"vy":-0.0019174673316864508,"vx":0.01817771023824366},{"id":"9c4f7c560b193429a7a4005088743efabe1a05eace6e2b29ab1803f943c58a0f","value":0.01209001,"scaledValue":6.038439468064796,"index":45,"x":4.782635578396096,"y":51.882314388561895,"vy":0.003960191844118888,"vx":-0.007150304268884446},{"id":"39dfb5f7f6202e8af282ea937a7a23444f37f48b91f7f86a031677ad65ee814b","value":0.00125494,"scaledValue":11.701668790765513,"index":46,"x":-146.1526308388144,"y":-72.1033868376433,"vy":-0.010230000849718134,"vx":-0.013736347251750214},{"id":"6a4d4de4581aec296efa251f2df5de42e9dca327d7a4cae6025ef2fb8f5c99ba","value":0.000437,"scaledValue":14.338943407171708,"index":47,"x":154.87274584080794,"y":-49.21558013692637,"vy":0.007660658621580696,"vx":0.008509210824949086},{"id":"2e9a1502e52bb74d82503aaa059dbbd13034142bc9a56f6c8b6133a3a51b643c","value":0.04367684,"scaledValue":2.8273432362120214,"index":48,"x":-31.94522921795068,"y":163.94423385011595,"vy":-0.007605402284198681,"vx":0.0006518285597302776},{"id":"e24b9b41d4b8f4e5f5de8d842c0a6db746973992a2e5da169980db8c3e87475b","value":0.00256212,"scaledValue":9.91730059549246,"index":49,"x":-4.393780686252352,"y":-63.24627441847786,"vy":0.006628854794514227,"vx":0.008574826601981946},{"id":"5245faf8690f54a113e7b5b252955b769416d620a836d87085cb220d7207b0e6","value":1.87928494,"scaledValue":6.577228383565538,"index":50,"x":40.52787806617522,"y":47.6302889385378,"vy":0.013353173349402747,"vx":-0.009657712092594571},{"id":"2afd962ccc5c83710e198f1f9727e2b766f8b70f552ec3e42b24d09875fa934b","value":0.00163891,"scaledValue":11.0343097306489,"index":51,"x":-168.96183546045188,"y":15.152863839086576,"vy":-0.0003358439873635266,"vx":0.012183577887932517},{"id":"dbee5d0854f3d4a53e3fe59b26fa9ba345d37363d623c1d98d5f2dbad24384de","value":0.01841681,"scaledValue":4.986228611193102,"index":52,"x":111.65147567612075,"y":-121.09592231413158,"vy":0.0006210531435826061,"vx":0.011760857256618728},{"id":"aa45d7c84051ba33108bc75ac66bc397c6ec94a5d0de96ca5c052075e4dfe730","value":0.0042663,"scaledValue":8.642520844793784,"index":53,"x":0.18837990165517327,"y":78.98652955515843,"vy":-0.00022671960403440882,"vx":-0.008650390718149596},{"id":"800400786aeb6290fe047631f3966acb0c7bdcabf2c95508d4ca210fef97b768","value":0.00206856,"scaledValue":10.45225641489255,"index":54,"x":-98.54266653146806,"y":-120.83625448891934,"vy":-0.0030939971235817818,"vx":-0.01375008103206421},{"id":"5cb7ec3fbace9e08d6792f9279bee373619e32d2aad8c2e861705c34d463682f","value":0.10028239,"scaledValue":0.7494129317729978,"index":55,"x":162.34421509602805,"y":-13.964563969501798,"vy":0.00624595309633808,"vx":-0.0016803485850709564},{"id":"21b629ea3a11f96a7f33ec45db37c282d1be174665c0c745ffaa0d54353fe64e","value":0.0001836,"scaledValue":16.506877699444708,"index":56,"x":-56.45016617849045,"y":66.24926838006755,"vy":-0.006759333176164006,"vx":-0.008354944570496759},{"id":"751c12e556dddec50b2170ac17fdcab032c0cd4ba19cd9bab7bcf92b77a79f43","value":0.01264027,"scaledValue":5.927168824330174,"index":57,"x":42.10790911570036,"y":-154.9467385578692,"vy":-0.013529030235138162,"vx":0.015094161304739494},{"id":"07d5c7b73a8aa5aa5fce9995256ea7aa49f40410638517ed7d9157eac293fef5","value":0.01559022,"scaledValue":5.402778711005034,"index":58,"x":83.80021445355682,"y":125.66875069609112,"vy":-0.006622808063788965,"vx":0.009925224865012782},{"id":"302c6ee270780c365ee3c5088ffeb422135ac2f440ff47e0e429b47c17a09189","value":0.01038027,"scaledValue":6.41962097505499,"index":59,"x":-160.32803046824162,"y":-27.139606756473817,"vy":0.005271504690218592,"vx":-0.0033544412950291757},{"id":"42dada2484c662200a676fb39b45c72f9c0d372bf2e6ebdd692ca0c1f25abe1b","value":0.01403293,"scaledValue":5.665871421168951,"index":60,"x":143.07752979261855,"y":-89.76907377586411,"vy":0.009208630778452409,"vx":0.00911348270062542},{"id":"42fced4f6dddc8c0c5dfc2961a4b1f8218cec7033b7fcc2a182f612f53756d85","value":0.01369011,"scaledValue":5.727704011629928,"index":61,"x":-27.60199260900793,"y":69.52704692252023,"vy":-0.018119885994957962,"vx":-0.010693344095894336},{"id":"5fc97a261779fc9c9f7caaa8b8f4ebb15bf0882c0f48d322bc7b60f598775f95","value":0.01836382,"scaledValue":4.993432136073256,"index":62,"x":-50.27887089410295,"y":-147.93951165025675,"vy":-0.0037615578543626293,"vx":-0.002443793947006023},{"id":"54cf1ea485bc53b589ad56d3e44642ca2f9b47ea0ab969868c352107f5fbc5fd","value":0.67381746,"scaledValue":4.013009910970839,"index":63,"x":139.86704860152975,"y":72.15237120874446,"vy":-0.006040220755463244,"vx":0.00579902299259345},{"id":"3b6aa711b18a9ea68ede76692510882d08d2cc9bed8e5615b0f21c863418eeab","value":0.00357556,"scaledValue":9.08408367936703,"index":64,"x":-146.56271829828108,"y":43.992258950214215,"vy":-0.004393034591585299,"vx":0.0045122407957955525},{"id":"5efcfeec4a1f1fa8b94728fea62a772ff73c62bf44ac77a95634b8be5590a1a3","value":0.00312531,"scaledValue":9.420554501784418,"index":65,"x":47.361709723676945,"y":-61.09892839696414,"vy":0.004624710278239041,"vx":0.00977231256659654},{"id":"54f4420a2e2b6f6203c269535e63aba04c6f0d5f999ace3d0b05cf3f33461174","value":0.02307547,"scaledValue":4.422462826091557,"index":66,"x":62.43554889120576,"y":151.22955400216134,"vy":0.009248086212734917,"vx":0.008786190252268943},{"id":"e2590789ecc1409b927a10fea76d985e8f04db6efd146da5e206cc42c1729b89","value":0.26658009,"scaledValue":1.694798612008503,"index":67,"x":-66.38372678086903,"y":-41.33983210495547,"vy":0.0025555267075112907,"vx":0.0025649589773733884},{"id":"d5064b12f00a72bc1f3036085a3ffaca2c41c3450545986177e3bbe9a757d8ae","value":4.69926111,"scaledValue":8.868513214297069,"index":68,"x":81.77999399353972,"y":-13.855733582197763,"vy":0.015403448742283096,"vx":-0.0006893582847189106},{"id":"a29feb8cc2b5bb84a273cafe36d645979711119dc72adad5e42c44110c418b57","value":0.01186575,"scaledValue":6.085247949917479,"index":69,"x":-85.24478175349249,"y":131.65985076770818,"vy":-0.009590012565694495,"vx":-0.002536306001313049},{"id":"f5b4d65db644b81da1f535a108f832993a365ad501ad4693bab40158228d0f02","value":0.0139144,"scaledValue":5.687077509675827,"index":70,"x":-21.306146019216403,"y":-166.76702637155987,"vy":-0.011221042331053298,"vx":-0.0005042912896022766},{"id":"ff2f1fe7dcfb13b500337e3b9c54a05ae8963d57a794b79be689f7b13328f1c1","value":0.00292066,"scaledValue":9.589864152112575,"index":71,"x":108.3493037793728,"y":103.81817402979392,"vy":0.0015447622914326997,"vx":0.001708026673326879},{"id":"9502e2cb091251065ab9067bf0257b78b12cab4c1939200877a11b2a874a6e0c","value":0.00116129,"scaledValue":11.895559556972476,"index":72,"x":-146.41202216927076,"y":3.1141923236316953,"vy":-0.015155393101694612,"vx":-0.0053342762294929175},{"id":"1e97ae3b0dcdbdcb9a58bc05d6e4e902537138571d9b48f521f439e6f081708d","value":0.01577805,"scaledValue":5.372838863362023,"index":73,"x":66.32193296636079,"y":-37.056919079455845,"vy":0.0053272191069188846,"vx":0.0052461798090759565},{"id":"6adf78526772454d7afe93d5b0bc1630ba283dfa5d048342e410194a14350cc6","value":0.01673179,"scaledValue":5.226111940704518,"index":74,"x":-3.7195113880699577,"y":147.48384528171917,"vy":0.008648002158633039,"vx":0.007861664604314122},{"id":"befaa6e380d19a598ef87601c404900d883b244e1b4abe43d487e1d7ae103412","value":0.001854,"scaledValue":10.726024529596183,"index":75,"x":-37.642105837068634,"y":-82.4749714207874,"vy":0.00032314335025778184,"vx":-0.012876195384183086},{"id":"2f0cdfea61e7b2486a9c9f9102c727b081d29b25e2cad079673911aebb060e0d","value":0.0069829,"scaledValue":7.410727439283507,"index":76,"x":82.85987441993602,"y":21.381092081106324,"vy":0.01179633160796078,"vx":-0.004546079993687779},{"id":"86eb71830a8820c058360cf4596ea6825b61375d75c50e8ad1d7c23eec007be5","value":0.08891612,"scaledValue":1.0501545639150223,"index":77,"x":-142.14213699318816,"y":85.0530371328608,"vy":0.01953687249774121,"vx":-0.017918871625812738},{"id":"df453a051ab1c3964f7eee650926c3e5c9ea7ac9a16089df3027a3b608538226","value":0.0755914,"scaledValue":1.4560318972029513,"index":78,"x":21.883528840209063,"y":-79.73755790313791,"vy":0.010558462879707086,"vx":0.0051378466357825696},{"id":"36945446fd66263be4d273129ba8994418faf45f61be6b457501b4d840d97741","value":9.99993065,"scaledValue":10.756445394924995,"index":79,"x":35.02749516604923,"y":75.18958309772512,"vy":0.01558812419597927,"vx":-0.004105956411817474},{"id":"8454069b955e40d77a991064b9fdfdd35fbb95e5e0b36e3d037dcf8946e08567","value":5.34110075,"scaledValue":9.188579411721065,"index":80,"x":-135.84331710685908,"y":-42.973976824322065,"vy":0.0025914518730594583,"vx":-0.0007584148860167117},{"id":"383ce41071a9fe7667b44753fe0624372ed1dcf79fb32e56b648cb0b2c7fe317","value":0.09665188,"scaledValue":0.8415990547184657,"index":81,"x":125.46184181406097,"y":-62.91092239635387,"vy":0.0035441693211364475,"vx":0.00784795412529562},{"id":"a774ccb56c6ca414824eb67c03a428e4a6c3c02031c9bb4eaafe510562428435","value":0.01356959,"scaledValue":5.749810048246271,"index":82,"x":-51.79894398728294,"y":137.8302841218391,"vy":-0.005737462027358986,"vx":0.00969020788047883},{"id":"99df9dfdf15ed159e58c7a78e7dcb0d20b58ecb4f6a206ed6b5db5fa8b98bca1","value":0.00922275,"scaledValue":6.715205053109019,"index":83,"x":-20.878200963413878,"y":-137.30115385547313,"vy":-0.01386820915116964,"vx":-0.0030886690651297038},{"id":"3823ed190cdf8430e7a421d4fb5292372652ab100cf0528127a5b0cff78b0de3","value":0.02535351,"scaledValue":4.1870952424784935,"index":84,"x":66.632064057199,"y":50.046917577412714,"vy":0.01991350407461794,"vx":-0.0013424156711731472},{"id":"61371aae7e15e5b408bc09e8a0d8509ab3ec8abbde4bc0e094cfa8652642b2b7","value":1.95225188,"scaledValue":6.672458791379009,"index":85,"x":-76.95284226553193,"y":17.245725810361964,"vy":-0.0014695058519128806,"vx":-0.0008538261634366551},{"id":"d2bbcc90f38081bcb8a4b3c7e893a8806d872ff7ee457194ad43e6b0a7f3df5e","value":26.09167352,"scaledValue":13.154040603020027,"index":86,"x":82.69924137544146,"y":-103.8830521715766,"vy":0.005726124988179748,"vx":0.016661310449856092},{"id":"93d6662847d53b82ffd544c56831556425627a6b8e7fcbd9cf3f50c6d4648533","value":0.07099821,"scaledValue":1.612751533815592,"index":87,"x":23.185422947116304,"y":144.80620912595467,"vy":0.004437443532791918,"vx":0.007129220646448253},{"id":"6d0eda32c930c3ef7259d22ed824405b67a0dfcd4cb7c0e4a4648ae998ee884a","value":0.00355422,"scaledValue":9.09904912270843,"index":88,"x":-106.26935326813737,"y":-89.97122475884925,"vy":-0.0019684981453296224,"vx":-0.008784063885866788},{"id":"a2ebbd2e3e17c5d23d404d0550548c0038fae6fff89f6ced24e007a286daf50a","value":0.00215836,"scaledValue":10.346016512321539,"index":89,"x":142.52392879933473,"y":4.664440347811908,"vy":0.0008923233091235216,"vx":-0.00018273078401576104}];
            
var svg = d3.select("#bubbleCanvas"),
    width = window.innerWidth;// +svg.attr("width"),
    height = window.innerHeight;// +svg.attr("height");

var centerX = width / 2.0;
var centerY = height / 2.0;
var counter = 0;

var node = svg.append("g")
    .attr("class", "nodes")
    .selectAll("circle");

var svg = d3.select("body").append("svg");
    
var bubbleSimulation = d3.forceSimulation(txNodes)
  .force("charge", d3.forceManyBody().strength(-3))
  .force("x", d3.forceX().strength(0.01))
  .force("y", d3.forceY().strength(0.01))
  .force("collide", d3.forceCollide(function radius(d,i){return d.scaledValue;}))
  .alphaTarget(0.5)
  .on("tick", bubblesTicked);

// const bubbleSimulation = d3.forceSimulation(txNodes)
//     .alphaTarget(0.5) // stay hot
//     .velocityDecay(0.1) // low friction
//     .force("x", d3.forceX().strength(0.01))
//     .force("y", d3.forceY().strength(0.01))
//     .force("collide", d3.forceCollide().radius(d => d.scaledValue + 1).iterations(3))
//     .force("charge", d3.forceManyBody().strength((d, i) => i ? 0 : -width / 3))
//     .on("tick", bubblesTicked);


// d3.select("svg")
// .on("touchmove", event => event.preventDefault())
// .on("mousemove", function () {
//   even = window.Event;
//   bubbleSimulation.force("collide", d3.forceCollide(2));
//   // txNodes[0].fx = x - width / 2;
//   // txNodes[0].fy = y - height / 2;
// });


function pointed(event) {
  x = event.offsetX;
  y = event.offsetY;
  console.log(x, y);
  if ((x > width/4 && y > width/4) || (x > width/4 && y < width - (width/4)) ) {
    bubbleSimulation.force("collide", d3.forceCollide(2).radius(d => d.r + 1).iterations(3));
    txNodes[0].x = x - width / 2;
    txNodes[0].y = y - height / 2;
  } else {
    txNodes[0].x = centerX;
    txNodes[0].y = centerY;
  }
}

var websocket = new WebSocket("wss://ws.blockchain.info/inv");

websocket.onopen = function () {
  // document.getElementById("status").innerHTML = "Connected";
  start();
};

websocket.onerror = function (event) {
  document.getElementById("status").innerHTML = "Error";
};

websocket.onmessage = function (event) {
  //message processing code goes here
  var msgData = JSON.parse(event.data);
  if (msgData.op === "utx") {
    var txHash = msgData.x.hash;
    var outputs = msgData.x.out;
    var totalTxValue = 0;
    for (var j = 0; j < outputs.length; j++) {
      var output = outputs[j];
      totalTxValue += output.value;
    }
    totalTxValue /= 100000000;
    var newTx = {
      id: txHash,
      value: totalTxValue,
      scaledValue: Math.abs(5 + Math.log(totalTxValue) * 2.5),
    };
    txNodes.push(newTx);
    if (txNodes.length > 1000) {
      txNodes.shift();
    }
    bubblesRestart();

    // document.getElementById("status").innerHTML = "tx: " + txHash;
  }
};


function sendMessage(message) {
document.getElementById("output").innerHTML = message;
websocket.send(message);
}

function bubblesRestart() {
var updateSelection = node.data(txNodes, function (d) {
  return d.id;
}); //updated transactions
updateSelection.exit().remove(); //removed transactions
var enterSelection = updateSelection
  .enter()
  .append("circle")
  .attr("r", function (d) {
    return d.scaledValue;
  })
  .attr("fill", function (d) {
    return d3.hsl(180 + Math.min(d.value * 4, 180), 0.5, 0.5, 0.5);
  }); //new transactions
node = updateSelection.merge(enterSelection);
bubbleSimulation.nodes(txNodes);
bubbleSimulation.alpha(1).restart();
}

function bubblesTicked() {
node
  .attr("cx", function (d) {
    return d.x + centerX;
  })
  .attr("cy", function (d) {
    return d.y + centerY;
  });
}

function start() {
websocket.send('{"op":"unconfirmed_sub"}');
}

function stop() {
websocket.send('{"op":"unconfirmed_unsub"}');
}